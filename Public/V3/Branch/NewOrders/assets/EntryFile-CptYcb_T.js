var k=Object.defineProperty,R=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable;var D=(t,e,l)=>e in t?k(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l,y=(t,e)=>{for(var l in e||(e={}))P.call(e,l)&&D(t,l,e[l]);if(T)for(var l of T(e))x.call(e,l)&&D(t,l,e[l]);return t},w=(t,e)=>R(t,E(e));import{S as M}from"./EntryFile-D68kwv0T.js";const v=()=>{let t=localStorage.getItem("CustomerNames");if(t===null){document.getElementById("MasterButtonId").click();return}let e=JSON.parse(t),l=document.getElementById("CustomersDataListId");e.forEach(a=>{let o=document.createElement("option");o.value=`${a.CustomerName}:${a.Mobile}`,o.innerHTML=`${a.CustomerName}:${a.Mobile}`,l.appendChild(o)})},H="binV4",K="Masters",J="CustomerNames",U="Custom/Cleaning/Branch/Order/NewOrderV1/TodayCustomerFilter",W={OrderKey:"CustomerNames",ItemNamesKey:"ItemNames",AddOnsKey:"AddOns"},z={NewOrderButtonId:{PostFetch1:"/Custom/Cleaning/Branch/Order/NewOrderV1/InSertOrder",PostFetch2:"/Custom/Cleaning/Branch/Order/NewOrderV1",PostFetch3:"/Custom/Cleaning/Branch/Order/NewOrderV2",PostFetch:"/V3/BranOrdersKKD/AddWithDefault/InsertFromBody",RedirectUrl:{"500Status":"/Laundry/Branch/NewOrders/HtmlFiles/AddItemsWBtns.html","200Status":"AddItemsWBtns.html"}},AddItemsButtonId:{PostFetch:"/Custom/Cleaning/Branch/Order/NewOrder",RedirectUrl:{"500Status":"/Laundry/Branch/NewOrders/HtmlFiles/AddItemsWBtns.html","200Status":"AddItemsTotalRight.html"}}},f={routePath:H,folderName:K,tableName:J,TodayUrl:U,localStorageKeys:W,Urls:z};let G=async()=>{let t=f.TodayUrl,e=localStorage.getItem("BranchName"),o=document.getElementById("CustomerNameInputId").value.replace(/\D/g,""),n=`/${t}/${e}/${o}`;return await await fetch(n)},Y=t=>{let a=X({inData:t}).sort((i,d)=>i.pk===d.pk?0:i.pk<d.pk?1:-1);console.log("jVarLocalOrdered:",a);var o=$("#table"),n=$("#YesterdayTableId"),c=$("#ThisWeekTableId"),s=$("#AllTableId");o.bootstrapTable("load",a),n.bootstrapTable("load",[]),c.bootstrapTable("load",[]),s.bootstrapTable("load",[])},X=({inData:t})=>{let e=t,l=[];return l=e.map(a=>{a.AggValues={},a.AggValues.ItemDetails=`${Object.keys(a.ItemsInOrder).length} / ${Object.values(a.ItemsInOrder).map(n=>n.Pcs).reduce((n,c)=>n+parseInt(c),0)}`,a.AggValues.SettlementAmount="",Object.values(a.CheckOutData)[0]&&(a.AggValues.SettlementAmount=Object.values(a.CheckOutData)[0].CardAmount+Object.values(a.CheckOutData)[0].CashAmount+Object.values(a.CheckOutData)[0].UPIAmount,a.IsSettled=!1),Object.keys(a.CheckOutData).length>0&&(a.IsSettled=!0);let o=Object.values(a.AddOnData);return a.AggValues.ItemsArray=Object.values(a.ItemsInOrder).map(n=>(n.AddOnDataAsArray=o.filter(c=>c.AddOnItemSerial===n.ItemSerial),n)),a}),l},q=t=>{var e=$("#table"),l=$("#YesterdayTableId"),a=$("#ThisWeekTableId"),o=$("#AllTableId");e.bootstrapTable("load",[]),l.bootstrapTable("load",[]),a.bootstrapTable("load",[]),o.bootstrapTable("load",[])},Q=async t=>{let e=t;e.status===200&&Y(await e.json()),e.status===500&&q(await e.json())},Z=async()=>{let t=await G();Q(t)};const F=()=>{Z()};let _=()=>{document.getElementById("CustomerNameInputId").addEventListener("keypress",l=>{l.key==="Enter"&&F()})},tt=async()=>{let t=document.getElementById("CustomerNameInputId");if(t.value==="")return t.classList.add("is-invalid"),!1;let e=await et();return console.log("LocalFech:",e),e===!1?(t.classList.add("is-invalid"),!1):!0};const et=async()=>{let e=document.getElementById("CustomerNameInputId").value.split(":")[1],l=`/${f.routePath}/MastersCustomers/Show/Filter/Mobile/${e}`;return(await fetch(l)).status!==500},at="POST",lt={Accept:"application/json","Content-Type":"application/json"},ot={},nt={method:at,headers:lt,body:ot};let rt=()=>{let e=ct().split(":")[1],a={Key:"CustomerData",Value:{UserName:localStorage.getItem("UserName"),inMobileNumber:e}};return w(y({},nt),{body:JSON.stringify(a)})},ct=()=>{let e=document.getElementById("CustomerNameInputId");if(e!==null)return e.value.trim()},it=async()=>{let t=rt();localStorage.getItem("BranchName");let e=`${f.Urls.NewOrderButtonId.PostFetch}`;return await await fetch(e,t)},st=()=>{window.location=f.Urls.NewOrderButtonId.RedirectUrl["200Status"]},dt=({inresponse:t})=>{Swal.fire({title:"Error Alert",text:`${t}`,icon:"error",confirmButtonColor:"#3085d6",showDenyButton:!0,denyButtonText:"Add ItemsV1",denyButtonColor:"#008000"}).then(e=>{(e.isConfirmed||e.isDismissed)&&(window.location.href=""),e.isDenied&&(window.location.href=f.Urls.NewOrderButtonId.RedirectUrl["500Status"])})},ut=async()=>{let t=await it();t.status===200&&st(),t.status===500&&dt({inresponse:await t.text()})};const mt=async()=>{await tt()&&ut()};let ft=()=>{document.getElementById("NewOrderButtonId").addEventListener("click",mt)},Ft=()=>{document.getElementById("CustomerNameSearchButtonId").addEventListener("click",F)},Lt=async()=>{let t=f.localStorageKeys.OrderKey,a=await(await fetch("/V1/MastersCustomers/Read/AsIs")).json();console.log(a);let o=a.sort((n,c)=>n.CustomerName-c.CustomerName);a.sort(function(n,c){var s=c.CustomerName.toLowerCase(),i=n.CustomerName.toLowerCase();return i<s?-1:i>s?1:0}),localStorage.setItem(t,JSON.stringify(o))},$t=async()=>{let t=f.localStorageKeys.ItemNamesKey,a=await(await fetch("/V1/MastersItems/Read/AsIs")).json();localStorage.setItem(t,JSON.stringify(a))},pt=async()=>{let t=f.localStorageKeys.AddOnsKey,a=await(await fetch("/V1/MastersAddOns/Read/AsIs")).json();localStorage.setItem(t,JSON.stringify(a))},It=()=>{Lt().then(()=>{jt()}),$t().then(),pt().then()};const jt=()=>{let t=localStorage.getItem("CustomerNames");if(t!==null){let e=JSON.parse(t),l=document.getElementById("CustomersDataListId");l.innerHTML="",e.forEach(a=>{let o=document.createElement("option");o.value=`${a.CustomerName}:${a.Mobile}`,o.innerHTML=`${a.CustomerName}:${a.Mobile}`,l.appendChild(o)})}};let St=()=>{document.getElementById("MasterButtonId").addEventListener("click",()=>{It()})},Vt=()=>{const e=localStorage.getItem("BranchName").replace("BranOrders","");let l=document.getElementById("BranchButtonId");l.innerText=e,l.addEventListener("click",function(){window.location.href="/LoginUsers/HtmlFiles/loginBranch.html"})};const Ct="binV4",bt="MastersCustomers",gt="Custom/Cleaning/Branch/Order/NewOrderV1/YesterdayCustomerFilter",ht={routePath:Ct,tableName:bt,url:gt};let Ot=async()=>{let t=ht.url,e=localStorage.getItem("BranchName");const a=At().split(":")[1].trim();let o=`/${t}/${e}/${a}`;return await await fetch(o)},At=()=>{let e=document.getElementById("CustomerNameInputId");if(e!==null)return e.value.trim()},Tt=({inData:t})=>{let a=Dt({inData:t}).sort((n,c)=>n.pk===c.pk?0:n.pk<c.pk?1:-1);var o=$("#YesterdayTableId");o.bootstrapTable("load",a)},Dt=({inData:t})=>{let e=t,l=[];return l=e.map(a=>{a.AggValues={},a.AggValues.ItemDetails=`${Object.keys(a.ItemsInOrder).length} / ${Object.values(a.ItemsInOrder).map(n=>n.Pcs).reduce((n,c)=>n+parseInt(c),0)}`,a.AggValues.SettlementAmount="",Object.values(a.CheckOutData)[0]&&(a.AggValues.SettlementAmount=Object.values(a.CheckOutData)[0].CardAmount+Object.values(a.CheckOutData)[0].CashAmount+Object.values(a.CheckOutData)[0].UPIAmount,a.IsSettled=!1),Object.keys(a.CheckOutData).length>0&&(a.IsSettled=!0);let o=Object.values(a.AddOnData);return a.AggValues.ItemsArray=Object.values(a.ItemsInOrder).map(n=>(n.AddOnDataAsArray=o.filter(c=>c.AddOnItemSerial===n.ItemSerial),n)),a}),l},yt=async()=>{let t=await Ot();t.status===200&&Tt({inData:await t.json()})},wt=()=>{document.getElementById("YesterdayRefreshButtonId").addEventListener("click",yt)};const vt="binV4",Nt="MastersCustomers",Bt="Custom/Cleaning/Branch/Order/NewOrderV1/WeekCustomerFilter",kt={routePath:vt,tableName:Nt,url:Bt};let Rt=async()=>{let t=kt.url,e=localStorage.getItem("BranchName");const a=Et().split(":")[1].trim();let o=`/${t}/${e}/${a}`;return await await fetch(o)},Et=()=>{let e=document.getElementById("CustomerNameInputId");if(e!==null)return e.value.trim()},Pt=({inData:t})=>{let a=xt({inData:t}).sort((n,c)=>n.pk===c.pk?0:n.pk<c.pk?1:-1);var o=$("#ThisWeekTableId");o.bootstrapTable("load",a)},xt=({inData:t})=>{let e=t,l=[];return l=e.map(a=>{a.AggValues={},a.AggValues.ItemDetails=`${Object.keys(a.ItemsInOrder).length} / ${Object.values(a.ItemsInOrder).map(n=>n.Pcs).reduce((n,c)=>n+parseInt(c),0)}`,a.AggValues.SettlementAmount="",Object.values(a.CheckOutData)[0]&&(a.AggValues.SettlementAmount=Object.values(a.CheckOutData)[0].CardAmount+Object.values(a.CheckOutData)[0].CashAmount+Object.values(a.CheckOutData)[0].UPIAmount,a.IsSettled=!1),Object.keys(a.CheckOutData).length>0&&(a.IsSettled=!0);let o=Object.values(a.AddOnData);return a.AggValues.ItemsArray=Object.values(a.ItemsInOrder).map(n=>(n.AddOnDataAsArray=o.filter(c=>c.AddOnItemSerial===n.ItemSerial),n)),a}),l},Mt=async()=>{let t=await Rt();t.status===200&&Pt({inData:await t.json()})},Ht=()=>{document.getElementById("ThisWeekRefreshButtonId").addEventListener("click",Mt)};const Kt="binV4",Jt="MastersCustomers",Ut="Custom/Cleaning/Branch/Order/NewOrderV1/AllCustomerFilter",Wt={routePath:Kt,tableName:Jt,url:Ut};let zt=async()=>{let t=Wt.url,e=localStorage.getItem("BranchName");const a=Gt().split(":")[1].trim();let o=`/${t}/${e}/${a}`;return await await fetch(o)},Gt=()=>{let e=document.getElementById("CustomerNameInputId");if(e!==null)return e.value.trim()},Yt=({inData:t})=>{let a=Xt({inData:t}).sort((n,c)=>n.pk===c.pk?0:n.pk<c.pk?1:-1);var o=$("#AllTableId");o.bootstrapTable("load",a)},Xt=({inData:t})=>{let e=t,l=[];return l=e.map(a=>{a.AggValues={},a.AggValues.ItemDetails=`${Object.keys(a.ItemsInOrder).length} / ${Object.values(a.ItemsInOrder).map(n=>n.Pcs).reduce((n,c)=>n+parseInt(c),0)}`,a.AggValues.SettlementAmount="",Object.values(a.CheckOutData)[0]&&(a.AggValues.SettlementAmount=Object.values(a.CheckOutData)[0].CardAmount+Object.values(a.CheckOutData)[0].CashAmount+Object.values(a.CheckOutData)[0].UPIAmount,a.IsSettled=!1),Object.keys(a.CheckOutData).length>0&&(a.IsSettled=!0);let o=Object.values(a.AddOnData);return a.AggValues.ItemsArray=Object.values(a.ItemsInOrder).map(n=>(n.AddOnDataAsArray=o.filter(c=>c.AddOnItemSerial===n.ItemSerial),n)),a}),l},qt=async()=>{let t=await zt();t.status===200&&Yt({inData:await t.json()})},Qt=()=>{document.getElementById("AllRefreshButtonId").addEventListener("click",qt)},Zt=()=>{wt(),Ht(),Qt()};const _t="/Custom/Cleaning/Masters/V2/Customers/Filter/Mobile/{MobileNumber}",te={GetEndPoint:_t};let ee=async()=>{let t=te.GetEndPoint;const l=ae().split(":")[1].trim(),a=t.replace("{MobileNumber}",l);return await await fetch(a)},ae=()=>{let e=document.getElementById("CustomerNameInputId");if(e!==null)return e.value.trim()},le=({inData:t})=>{oe({inValue:t.pk}),ne({inValue:t.CustomerName}),re({inValue:t.Mobile}),ce({inValue:t.DOB}),se({inValue:t.City}),de({inValue:t.Occupation}),ue({inValue:t.CompanyName}),ie({inValue:t.GSTNumber})},oe=({inValue:t})=>{let l=document.getElementById("pkId");l!==null&&(l.value=t)},ne=({inValue:t})=>{let l=document.getElementById("CustomerName");l!==null&&(l.value=t)},re=({inValue:t})=>{let l=document.getElementById("CustomerMobileNumber");l!==null&&(l.value=t)},ce=({inValue:t})=>{let l=document.getElementById("dob");l!==null&&(l.value=t)},ie=({inValue:t})=>{let l=document.getElementById("CustomerGST");l!==null&&(l.value=t)},se=({inValue:t})=>{let l=document.getElementById("CustomerLocation");l!==null&&(l.value=t)},de=({inValue:t})=>{let l=document.getElementById("CustomerOccupation");l!==null&&(l.value=t)},ue=({inValue:t})=>{let l=document.getElementById("CustomerCompany");l!==null&&(l.value=t)},me=({inData:t})=>{le({inData:t})},fe=({inResponse:t})=>{Swal.fire({text:`${t}`,icon:"error",title:"check"})},Fe=async({inResponse:t})=>{let e=await t;if(e.status===200){let l=await e.json();me({inData:l[0]})}if(e.status===500){let l=await e.text();fe({inResponse:l})}};const Le=async()=>{let t=await ee();Fe({inResponse:t})};let $e=()=>{document.getElementById("CustomerAlter").addEventListener("click",Le)},pe=()=>{$e()};const Ie="PUT",je={Accept:"application/json","Content-Type":"application/json"},Se="",N={method:Ie,headers:je,body:Se};let Ve=()=>{let t=document.getElementById("FormId");return N.body=JSON.stringify(Ce(t)),N};function Ce(t){var e=new FormData(t),l={};for(var[a,o]of e)l[a]?(Array.isArray(l[a])||(l[a]=[l[a]]),l[a].push(o)):l[a]=o;return l}const be="/Custom/Cleaning/Masters/V1/Customers",ge="MastersCustomers",he={url:be,tableName:ge};let Oe=async()=>{let t=he.url,e=Ae(),l=Ve(),a=`${t}/${e}`;return await await fetch(a,l)},Ae=()=>{let e=document.getElementById("pkId");if(e!==null)return e.value.trim()},Te=()=>{let e=document.getElementById("FormId").querySelectorAll("[required]"),l=!0;return e.forEach(a=>{if(a.value.trim().length===0){a.classList.add("is-invalid"),l=!1;return}if(a.value.trim().length>0&&a.classList.remove("is-invalid"),a.name==="Mobile"&&a.value.trim().length!==10){document.getElementById("MobileClass").innerHTML="must be 10",a.classList.add("is-invalid"),a.focus(),l=!1;return}if(a.name==="AddOnRate"&&!(a.value.trim().length<4)){l=!1;return}}),l},De=({inFetchData:t})=>{$("#editCustomerModal").modal("hide")},ye=async()=>{if(Te()){let e=await Oe();De({inResponse:e})}},we=()=>{let t=document.getElementById("ModelAlter");t!==null&&t.addEventListener("click",ye)},ve=()=>{we()},Ne=()=>{_(),ft(),Ft(),St(),Vt(),Zt(),pe(),ve()};const Be=()=>{let t=B({inGetKey:"CustomerMobile"}),e=B({inGetKey:"CustomerName"});if(t!==null&&e!==null){let l=`${e}:${t}`;ke(l)}};let ke=t=>{let l=document.getElementById("CustomerNameInputId");l!==null&&(l.value=t)},B=({inGetKey:t})=>{const e=window.location.search;return new URLSearchParams(e).get(t)};const Re="#toolbar",Ee="pk",Pe="true",xe=[],Me="",He="",Ke=[{field:"KS-Serial",title:"#"},{field:"AddOnService",title:"AddOnService"},{field:"AddOnRate",title:"AddOnRate"}],g={toolbar:Re,idfield:Ee,showFooter:Pe,data:xe,onClickRow:Me,icons:He,columns:Ke};let Je=({inFindColumn:t})=>{t.formatter=Ue},Ue=(t,e,l)=>l+1,We=({inFindColumn:t})=>{t.footerFormatter=ze};function ze(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let Ge=({inColumns:t})=>{let e=t,l=e.find(o=>o.field==="KS-Serial"),a=e.find(o=>o.field==="AddOnRate");l!==void 0&&Je({inFindColumn:l}),a!==void 0&&We({inFindColumn:a})},Ye=(t,e,l)=>{let a=e.AddOnArray,n=document.getElementById("TemplateForAddOns").content.cloneNode("true");const s=new XMLSerializer().serializeToString(n);let i=l.html(s).find("table");g.data=a,Ge({inColumns:g.columns}),i.bootstrapTable(g)};const Xe="#toolbar",qe="pk",Qe="true",Ze=[],_e=!0,ta="",ea="",aa="",la=[{field:"KS-Serial",title:"#"},{field:"ItemName",title:"ItemName"},{field:"Rate",title:"Rate"},{field:"Pcs",title:"Pcs"}],S={toolbar:Xe,idfield:qe,showFooter:Qe,data:Ze,detailView:_e,onClickRow:ta,onExpandRow:ea,icons:aa,columns:la};let oa=({inFindColumn:t})=>{t.formatter=na},na=(t,e,l)=>l+1,ra=({inFindColumn:t})=>{t.footerFormatter=ca};function ca(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let ia=({inFindColumn:t})=>{t.footerFormatter=sa};function sa(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let da=({inColumns:t})=>{let e=t,l=e.find(n=>n.field==="KS-Serial"),a=e.find(n=>n.field==="Rate"),o=e.find(n=>n.field==="Pcs");l!==void 0&&oa({inFindColumn:l}),a!==void 0&&ra({inFindColumn:a}),o!==void 0&&ia({inFindColumn:o})},ua=(t,e,l)=>{let a=e.AggValues.ItemsArray,n=document.getElementById("TemplateForItemNames").content.cloneNode("true");const s=new XMLSerializer().serializeToString(n);let i=l.html(s).find("table");S.data=a,S.onExpandRow=Ye,da({inColumns:S.columns}),i.bootstrapTable(S)};const ma="bi-plus-circle fs-4",fa="bi-dash-circle fs-4",Fa={detailOpen:ma,detailClose:fa},La="#toolbar",$a="pk",pa="true",Ia=[],ja=!0,Sa="",Va="",Ca="",ba=[{field:"pk",title:"Order#"},{field:"OrderData.Currentdateandtime",title:"Date",formatter:"LocalDate",visible:!1},{field:"DateTime",title:"Time Span",formatter:"TimeDiff",class:"d-none d-sm-table-cell"},{field:"AggValues.ItemDetails",title:"Items",footerFormatter:"ItemsFormatter",class:"d-none d-sm-table-cell"},{field:"AggValues.SettlementAmount",title:"Settlement",footerFormatter:"priceFormatter",align:"right",class:"d-none d-sm-table-cell"},{field:"IsSettled",title:"IsSettled",formatter:""},{title:"Opts.",field:"Opts",align:"center",formatter:""}],L={toolbar:La,idfield:$a,showFooter:pa,data:Ia,detailView:ja,onClickRow:Sa,onExpandRow:Va,icons:Ca,columns:ba};let ga=async({inFromFetch:t})=>{t.KTF===!1?Swal.fire({icon:"warning",text:t.KReason}):F()};const ha=async({inRowData:t})=>{let e=t.pk,a=`/Custom/Cleaning/Branch/Today/Orders/OnlyOrders/${localStorage.getItem("BranchName")}/${e}`,c=await(await fetch(a,{method:"delete",headers:{Accept:"application/json","Content-Type":"application/json"}})).json();return ga({inFromFetch:c}),c};let Oa=async({inRowData:t})=>{Swal.fire({title:"Are you sure to delete?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Delete",focusCancel:!0,focusButtonColor:"#0000ff"}).then(e=>{e.isConfirmed&&ha({inRowData:t}).then(l=>{})})};const Aa=(t,e,l)=>{l==="Opts"&&(t.IsSettled||Oa({inRowData:t}))};let Ta=({inFindColumn:t})=>{t.formatter=Da},Da=(t,e,l)=>l+1,ya=({inFindColumn:t})=>{t.footerFormatter=va,t.formatter=wa};const wa=(t,e,l)=>t===""?"":`₹ ${t}`;function va(t){return"₹ "+t.map(function(e){return+e.AggValues.SettlementAmount}).reduce(function(e,l){return e+l},0)}let Na=({inFindColumn:t})=>{t.footerFormatter=Ba};function Ba(t){this.field;var e=t.map(function(a){return+a.AggValues.ItemDetails.split(" / ")[1]}).reduce(function(a,o){return a+o},0),l=t.map(function(a){return+a.AggValues.ItemDetails.split(" / ")[0]}).reduce(function(a,o){return a+o},0);return`${l}/${e}`}const ka=({inFindColumn:t})=>{t.formatter=Ra},Ra=(t,e)=>{const l=e.AddOnArray;if(l&&l.length>0){const a=l.reduce((o,n)=>o+n.AddOnRate,0);return`<a href="#" class="btn btn-primary ">${l.length}-${a}</a>`}return"No"};let Ea=({inFindColumn:t})=>{t.formatter=Pa};function Pa(t,e,l){return e.IsSettled?[`<a href="./ExitOrderItems.html?OrderNumber=${e.pk}" class="link-danger">`,'<i class="bi bi-dropbox"></i>',"</a>"].join(""):['<a href="#" class="link-danger DeleteClass">','<i class="bi bi-trash"></i>',"</a>"].join("")}let xa=({inFindColumn:t})=>{t.formatter=Ma,t.footerFormatter=Ha};function Ma(t,e,l){let a=localStorage.getItem("PresentOrder"),o=JSON.parse(a),n=e.ItemSerial,c=Object.values(o.AddOnData).filter(s=>s.AddOnItemSerial===n);return c.length>0?c.map(i=>i.AddOnRate).reduce((i,d)=>i+d,0)*e.Pcs+e.Total:e.Total}function Ha(t){return this.field,"₹ "+t.map(function(e){return+e.Total}).reduce(function(e,l){return e+l},0)}let Ka=({inFindColumn:t})=>{t.formatter=Ja};const Ja=t=>{if(t===void 0)return"";var e=new Date-new Date(t),l=Math.floor(e/864e5),a=Math.floor(e%864e5/36e5),o=Math.round(e%864e5%36e5/6e4);return l+" days, "+a+" hours, "+o+" min..."};let Ua=({inFindColumn:t})=>{t.footerFormatter=Wa};function Wa(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let za=({inFindColumn:t})=>{t.formatter=Ga},Ga=(t,e,l)=>new Date(t).toLocaleDateString("en-GB"),Ya=({inFindColumn:t})=>{t.formatter=Xa},Xa=(t,e,l)=>(console.log("value : ",t),t===!0?'<span class="badge bg-success"><b>✓</b></span>':'<span class="badge bg-danger">✘</span>'),qa=({inColumns:t})=>{let e=t,l=e.find(r=>r.field==="KS-Serial"),a=e.find(r=>r.field==="AggValues.SettlementAmount"),o=e.find(r=>r.field==="AggValues.ItemDetails"),n=e.find(r=>r.field==="KS-AddOns"),c=e.find(r=>r.field==="Opts"),s=e.find(r=>r.field==="KS-Amount"),i=e.find(r=>r.field==="DateTime");e.find(r=>r.field==="ItemName");let d=e.find(r=>r.field==="Pcs");e.find(r=>r.field==="location");let u=e.find(r=>r.field==="DeliveryDateTime");e.find(r=>r.field==="ItemService");let m=e.find(r=>r.field==="IsSettled");l!==void 0&&Ta({inFindColumn:l}),a!==void 0&&ya({inFindColumn:a}),o!==void 0&&Na({inFindColumn:o}),n!==void 0&&ka({inFindColumn:n}),c!==void 0&&Ea({inFindColumn:c}),s!==void 0&&xa({inFindColumn:s}),i!==void 0&&Ka({inFindColumn:i}),d!==void 0&&Ua({inFindColumn:d}),u!==void 0&&za({inFindColumn:u}),m!==void 0&&Ya({inFindColumn:m})};const Qa=()=>{var t=$("#table");L.icons=Fa,L.onExpandRow=ua,L.onClickRow=Aa,qa({inColumns:L.columns}),t.bootstrapTable(L)},Za="#toolbar",_a="pk",tl="true",el=[],al="",ll="",ol=[{field:"KS-Serial",title:"#"},{field:"AddOnService",title:"AddOnService"},{field:"AddOnRate",title:"AddOnRate"}],h={toolbar:Za,idfield:_a,showFooter:tl,data:el,onClickRow:al,icons:ll,columns:ol};let nl=({inFindColumn:t})=>{t.formatter=rl},rl=(t,e,l)=>l+1,cl=({inFindColumn:t})=>{t.footerFormatter=il};function il(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let sl=({inColumns:t})=>{let e=t,l=e.find(o=>o.field==="KS-Serial"),a=e.find(o=>o.field==="AddOnRate");l!==void 0&&nl({inFindColumn:l}),a!==void 0&&cl({inFindColumn:a})},dl=(t,e,l)=>{let a=e.AddOnArray,n=document.getElementById("TemplateForAddOns").content.cloneNode("true");const s=new XMLSerializer().serializeToString(n);let i=l.html(s).find("table");h.data=a,sl({inColumns:h.columns}),i.bootstrapTable(h)};const ul="#toolbar",ml="pk",fl="true",Fl=[],Ll=!0,$l="",pl="",Il="",jl=[{field:"KS-Serial",title:"#"},{field:"ItemName",title:"ItemName"},{field:"Rate",title:"Rate"},{field:"Pcs",title:"Pcs"}],V={toolbar:ul,idfield:ml,showFooter:fl,data:Fl,detailView:Ll,onClickRow:$l,onExpandRow:pl,icons:Il,columns:jl};let Sl=({inFindColumn:t})=>{t.formatter=Vl},Vl=(t,e,l)=>l+1,Cl=({inFindColumn:t})=>{t.footerFormatter=bl};function bl(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let gl=({inFindColumn:t})=>{t.footerFormatter=hl};function hl(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let Ol=({inColumns:t})=>{let e=t,l=e.find(n=>n.field==="KS-Serial"),a=e.find(n=>n.field==="Rate"),o=e.find(n=>n.field==="Pcs");l!==void 0&&Sl({inFindColumn:l}),a!==void 0&&Cl({inFindColumn:a}),o!==void 0&&gl({inFindColumn:o})},Al=(t,e,l)=>{let a=e.AggValues.ItemsArray,n=document.getElementById("TemplateForItemNames").content.cloneNode("true");const s=new XMLSerializer().serializeToString(n);let i=l.html(s).find("table");V.data=a,V.onExpandRow=dl,Ol({inColumns:V.columns}),i.bootstrapTable(V)};const Tl="bi-plus-circle fs-4",Dl="bi-dash-circle fs-4",yl={detailOpen:Tl,detailClose:Dl},wl="#toolbar",vl="pk",Nl="true",Bl=[],kl=!0,Rl="",El="",Pl="",xl=[{field:"pk",title:"Order#"},{field:"OrderData.Currentdateandtime",title:"Date",formatter:"LocalDate",visible:!1},{field:"DateTime",title:"Time Span",formatter:"TimeDiff",class:"d-none d-sm-table-cell"},{field:"AggValues.ItemDetails",title:"Items",footerFormatter:"ItemsFormatter",class:"d-none d-sm-table-cell"},{field:"AggValues.SettlementAmount",title:"Settlement",footerFormatter:"priceFormatter",align:"right",class:"d-none d-sm-table-cell"},{field:"IsSettled",title:"IsSettled",formatter:""},{title:"Opts.",field:"Opts",align:"center",formatter:""}],p={toolbar:wl,idfield:vl,showFooter:Nl,data:Bl,detailView:kl,onClickRow:Rl,onExpandRow:El,icons:Pl,columns:xl};let Ml=async({inFromFetch:t})=>{t.KTF===!1?Swal.fire({icon:"warning",text:t.KReason}):F()};const Hl=async({inRowData:t})=>{let e=t.pk,a=`/Custom/Cleaning/Branch/Today/Orders/OnlyOrders/${localStorage.getItem("BranchName")}/${e}`,c=await(await fetch(a,{method:"delete",headers:{Accept:"application/json","Content-Type":"application/json"}})).json();return Ml({inFromFetch:c}),c};let Kl=async({inRowData:t})=>{Swal.fire({title:"Are you sure to delete?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Delete",focusCancel:!0,focusButtonColor:"#0000ff"}).then(e=>{e.isConfirmed&&Hl({inRowData:t}).then(l=>{})})};const Jl=(t,e,l)=>{l==="Opts"&&(t.IsSettled||Kl({inRowData:t}))};let Ul=({inFindColumn:t})=>{t.formatter=Wl},Wl=(t,e,l)=>l+1,zl=({inFindColumn:t})=>{t.footerFormatter=Yl,t.formatter=Gl};const Gl=(t,e,l)=>t===""?"":`₹ ${t}`;function Yl(t){return"₹ "+t.map(function(e){return+e.AggValues.SettlementAmount}).reduce(function(e,l){return e+l},0)}let Xl=({inFindColumn:t})=>{t.footerFormatter=ql};function ql(t){this.field;var e=t.map(function(a){return+a.AggValues.ItemDetails.split(" / ")[1]}).reduce(function(a,o){return a+o},0),l=t.map(function(a){return+a.AggValues.ItemDetails.split(" / ")[0]}).reduce(function(a,o){return a+o},0);return`${l}/${e}`}const Ql=({inFindColumn:t})=>{t.formatter=Zl},Zl=(t,e)=>{const l=e.AddOnArray;if(l&&l.length>0){const a=l.reduce((o,n)=>o+n.AddOnRate,0);return`<a href="#" class="btn btn-primary ">${l.length}-${a}</a>`}return"No"};let _l=({inFindColumn:t})=>{t.formatter=to};function to(t,e,l){return e.IsSettled?[`<a href="./ExitOrderItems.html?OrderNumber=${e.pk}" class="link-danger">`,'<i class="bi bi-dropbox"></i>',"</a>"].join(""):['<a href="#" class="link-danger DeleteClass">','<i class="bi bi-trash"></i>',"</a>"].join("")}let eo=({inFindColumn:t})=>{t.formatter=ao,t.footerFormatter=lo};function ao(t,e,l){let a=localStorage.getItem("PresentOrder"),o=JSON.parse(a),n=e.ItemSerial,c=Object.values(o.AddOnData).filter(s=>s.AddOnItemSerial===n);return c.length>0?c.map(i=>i.AddOnRate).reduce((i,d)=>i+d,0)*e.Pcs+e.Total:e.Total}function lo(t){return this.field,"₹ "+t.map(function(e){return+e.Total}).reduce(function(e,l){return e+l},0)}let oo=({inFindColumn:t})=>{t.formatter=no};const no=t=>{if(t===void 0)return"";var e=new Date-new Date(t),l=Math.floor(e/864e5),a=Math.floor(e%864e5/36e5),o=Math.round(e%864e5%36e5/6e4);return l+" days, "+a+" hours, "+o+" min..."};let ro=({inFindColumn:t})=>{t.footerFormatter=co};function co(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let io=({inFindColumn:t})=>{t.formatter=so},so=(t,e,l)=>new Date(t).toLocaleDateString("en-GB"),uo=({inFindColumn:t})=>{t.formatter=mo},mo=(t,e,l)=>(console.log("value : ",t),t===!0?'<span class="badge bg-success"><b>✓</b></span>':'<span class="badge bg-danger">✘</span>'),fo=({inColumns:t})=>{let e=t,l=e.find(r=>r.field==="KS-Serial"),a=e.find(r=>r.field==="AggValues.SettlementAmount"),o=e.find(r=>r.field==="AggValues.ItemDetails"),n=e.find(r=>r.field==="KS-AddOns"),c=e.find(r=>r.field==="Opts"),s=e.find(r=>r.field==="KS-Amount"),i=e.find(r=>r.field==="DateTime");e.find(r=>r.field==="ItemName");let d=e.find(r=>r.field==="Pcs");e.find(r=>r.field==="location");let u=e.find(r=>r.field==="DeliveryDateTime");e.find(r=>r.field==="ItemService");let m=e.find(r=>r.field==="IsSettled");l!==void 0&&Ul({inFindColumn:l}),a!==void 0&&zl({inFindColumn:a}),o!==void 0&&Xl({inFindColumn:o}),n!==void 0&&Ql({inFindColumn:n}),c!==void 0&&_l({inFindColumn:c}),s!==void 0&&eo({inFindColumn:s}),i!==void 0&&oo({inFindColumn:i}),d!==void 0&&ro({inFindColumn:d}),u!==void 0&&io({inFindColumn:u}),m!==void 0&&uo({inFindColumn:m})};const Fo="YesterdayTableId",Lo=()=>{var t=$(`#${Fo}`);p.icons=yl,p.onExpandRow=Al,p.onClickRow=Jl,fo({inColumns:p.columns}),t.bootstrapTable(p)},$o="#toolbar",po="pk",Io="true",jo=[],So="",Vo="",Co=[{field:"KS-Serial",title:"#"},{field:"AddOnService",title:"AddOnService"},{field:"AddOnRate",title:"AddOnRate"}],O={toolbar:$o,idfield:po,showFooter:Io,data:jo,onClickRow:So,icons:Vo,columns:Co};let bo=({inFindColumn:t})=>{t.formatter=go},go=(t,e,l)=>l+1,ho=({inFindColumn:t})=>{t.footerFormatter=Oo};function Oo(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let Ao=({inColumns:t})=>{let e=t,l=e.find(o=>o.field==="KS-Serial"),a=e.find(o=>o.field==="AddOnRate");l!==void 0&&bo({inFindColumn:l}),a!==void 0&&ho({inFindColumn:a})},To=(t,e,l)=>{let a=e.AddOnArray,n=document.getElementById("TemplateForAddOns").content.cloneNode("true");const s=new XMLSerializer().serializeToString(n);let i=l.html(s).find("table");O.data=a,Ao({inColumns:O.columns}),i.bootstrapTable(O)};const Do="#toolbar",yo="pk",wo="true",vo=[],No=!0,Bo="",ko="",Ro="",Eo=[{field:"KS-Serial",title:"#"},{field:"ItemName",title:"ItemName"},{field:"Rate",title:"Rate"},{field:"Pcs",title:"Pcs"}],C={toolbar:Do,idfield:yo,showFooter:wo,data:vo,detailView:No,onClickRow:Bo,onExpandRow:ko,icons:Ro,columns:Eo};let Po=({inFindColumn:t})=>{t.formatter=xo},xo=(t,e,l)=>l+1,Mo=({inFindColumn:t})=>{t.footerFormatter=Ho};function Ho(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let Ko=({inFindColumn:t})=>{t.footerFormatter=Jo};function Jo(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let Uo=({inColumns:t})=>{let e=t,l=e.find(n=>n.field==="KS-Serial"),a=e.find(n=>n.field==="Rate"),o=e.find(n=>n.field==="Pcs");l!==void 0&&Po({inFindColumn:l}),a!==void 0&&Mo({inFindColumn:a}),o!==void 0&&Ko({inFindColumn:o})},Wo=(t,e,l)=>{let a=e.AggValues.ItemsArray,n=document.getElementById("TemplateForItemNames").content.cloneNode("true");const s=new XMLSerializer().serializeToString(n);let i=l.html(s).find("table");C.data=a,C.onExpandRow=To,Uo({inColumns:C.columns}),i.bootstrapTable(C)};const zo="bi-plus-circle fs-4",Go="bi-dash-circle fs-4",Yo={detailOpen:zo,detailClose:Go},Xo="#toolbar",qo="pk",Qo="true",Zo=[],_o=!0,tn="",en="",an="",ln=[{field:"pk",title:"Order#"},{field:"OrderData.Currentdateandtime",title:"Date",formatter:"LocalDate",visible:!1},{field:"DateTime",title:"Time Span",formatter:"TimeDiff",class:"d-none d-sm-table-cell"},{field:"AggValues.ItemDetails",title:"Items",footerFormatter:"ItemsFormatter",class:"d-none d-sm-table-cell"},{field:"AggValues.SettlementAmount",title:"Settlement",footerFormatter:"priceFormatter",align:"right",class:"d-none d-sm-table-cell"},{field:"IsSettled",title:"IsSettled",formatter:""},{title:"Opts.",field:"Opts",align:"center",formatter:""}],I={toolbar:Xo,idfield:qo,showFooter:Qo,data:Zo,detailView:_o,onClickRow:tn,onExpandRow:en,icons:an,columns:ln};let on=async({inFromFetch:t})=>{t.KTF===!1?Swal.fire({icon:"warning",text:t.KReason}):F()};const nn=async({inRowData:t})=>{let e=t.pk,a=`/Custom/Cleaning/Branch/Today/Orders/OnlyOrders/${localStorage.getItem("BranchName")}/${e}`,c=await(await fetch(a,{method:"delete",headers:{Accept:"application/json","Content-Type":"application/json"}})).json();return on({inFromFetch:c}),c};let rn=async({inRowData:t})=>{Swal.fire({title:"Are you sure to delete?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Delete",focusCancel:!0,focusButtonColor:"#0000ff"}).then(e=>{e.isConfirmed&&nn({inRowData:t}).then(l=>{})})};const cn=(t,e,l)=>{l==="Opts"&&(t.IsSettled||rn({inRowData:t}))};let sn=({inFindColumn:t})=>{t.formatter=dn},dn=(t,e,l)=>l+1,un=({inFindColumn:t})=>{t.footerFormatter=fn,t.formatter=mn};const mn=(t,e,l)=>t===""?"":`₹ ${t}`;function fn(t){return"₹ "+t.map(function(e){return+e.AggValues.SettlementAmount}).reduce(function(e,l){return e+l},0)}let Fn=({inFindColumn:t})=>{t.footerFormatter=Ln};function Ln(t){this.field;var e=t.map(function(a){return+a.AggValues.ItemDetails.split(" / ")[1]}).reduce(function(a,o){return a+o},0),l=t.map(function(a){return+a.AggValues.ItemDetails.split(" / ")[0]}).reduce(function(a,o){return a+o},0);return`${l}/${e}`}const $n=({inFindColumn:t})=>{t.formatter=pn},pn=(t,e)=>{const l=e.AddOnArray;if(l&&l.length>0){const a=l.reduce((o,n)=>o+n.AddOnRate,0);return`<a href="#" class="btn btn-primary ">${l.length}-${a}</a>`}return"No"};let In=({inFindColumn:t})=>{t.formatter=jn};function jn(t,e,l){return e.IsSettled?[`<a href="./ExitOrderItems.html?OrderNumber=${e.pk}" class="link-danger">`,'<i class="bi bi-dropbox"></i>',"</a>"].join(""):['<a href="#" class="link-danger DeleteClass">','<i class="bi bi-trash"></i>',"</a>"].join("")}let Sn=({inFindColumn:t})=>{t.formatter=Vn,t.footerFormatter=Cn};function Vn(t,e,l){let a=localStorage.getItem("PresentOrder"),o=JSON.parse(a),n=e.ItemSerial,c=Object.values(o.AddOnData).filter(s=>s.AddOnItemSerial===n);return c.length>0?c.map(i=>i.AddOnRate).reduce((i,d)=>i+d,0)*e.Pcs+e.Total:e.Total}function Cn(t){return this.field,"₹ "+t.map(function(e){return+e.Total}).reduce(function(e,l){return e+l},0)}let bn=({inFindColumn:t})=>{t.formatter=gn};const gn=t=>{if(t===void 0)return"";var e=new Date-new Date(t),l=Math.floor(e/864e5),a=Math.floor(e%864e5/36e5),o=Math.round(e%864e5%36e5/6e4);return l+" days, "+a+" hours, "+o+" min..."};let hn=({inFindColumn:t})=>{t.footerFormatter=On};function On(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let An=({inFindColumn:t})=>{t.formatter=Tn},Tn=(t,e,l)=>new Date(t).toLocaleDateString("en-GB"),Dn=({inFindColumn:t})=>{t.formatter=yn},yn=(t,e,l)=>(console.log("value : ",t),t===!0?'<span class="badge bg-success"><b>✓</b></span>':'<span class="badge bg-danger">✘</span>'),wn=({inColumns:t})=>{let e=t,l=e.find(r=>r.field==="KS-Serial"),a=e.find(r=>r.field==="AggValues.SettlementAmount"),o=e.find(r=>r.field==="AggValues.ItemDetails"),n=e.find(r=>r.field==="KS-AddOns"),c=e.find(r=>r.field==="Opts"),s=e.find(r=>r.field==="KS-Amount"),i=e.find(r=>r.field==="DateTime");e.find(r=>r.field==="ItemName");let d=e.find(r=>r.field==="Pcs");e.find(r=>r.field==="location");let u=e.find(r=>r.field==="DeliveryDateTime");e.find(r=>r.field==="ItemService");let m=e.find(r=>r.field==="IsSettled");l!==void 0&&sn({inFindColumn:l}),a!==void 0&&un({inFindColumn:a}),o!==void 0&&Fn({inFindColumn:o}),n!==void 0&&$n({inFindColumn:n}),c!==void 0&&In({inFindColumn:c}),s!==void 0&&Sn({inFindColumn:s}),i!==void 0&&bn({inFindColumn:i}),d!==void 0&&hn({inFindColumn:d}),u!==void 0&&An({inFindColumn:u}),m!==void 0&&Dn({inFindColumn:m})};const vn="ThisWeekTableId",Nn=()=>{var t=$(`#${vn}`);I.icons=Yo,I.onExpandRow=Wo,I.onClickRow=cn,wn({inColumns:I.columns}),t.bootstrapTable(I)},Bn="#toolbar",kn="pk",Rn="true",En=[],Pn="",xn="",Mn=[{field:"KS-Serial",title:"#"},{field:"AddOnService",title:"AddOnService"},{field:"AddOnRate",title:"AddOnRate"}],A={toolbar:Bn,idfield:kn,showFooter:Rn,data:En,onClickRow:Pn,icons:xn,columns:Mn};let Hn=({inFindColumn:t})=>{t.formatter=Kn},Kn=(t,e,l)=>l+1,Jn=({inFindColumn:t})=>{t.footerFormatter=Un};function Un(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let Wn=({inColumns:t})=>{let e=t,l=e.find(o=>o.field==="KS-Serial"),a=e.find(o=>o.field==="AddOnRate");l!==void 0&&Hn({inFindColumn:l}),a!==void 0&&Jn({inFindColumn:a})},zn=(t,e,l)=>{let a=e.AddOnArray,n=document.getElementById("TemplateForAddOns").content.cloneNode("true");const s=new XMLSerializer().serializeToString(n);let i=l.html(s).find("table");A.data=a,Wn({inColumns:A.columns}),i.bootstrapTable(A)};const Gn="#toolbar",Yn="pk",Xn="true",qn=[],Qn=!0,Zn="",_n="",tr="",er=[{field:"KS-Serial",title:"#"},{field:"ItemName",title:"ItemName"},{field:"Rate",title:"Rate"},{field:"Pcs",title:"Pcs"}],b={toolbar:Gn,idfield:Yn,showFooter:Xn,data:qn,detailView:Qn,onClickRow:Zn,onExpandRow:_n,icons:tr,columns:er};let ar=({inFindColumn:t})=>{t.formatter=lr},lr=(t,e,l)=>l+1,or=({inFindColumn:t})=>{t.footerFormatter=nr};function nr(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let rr=({inFindColumn:t})=>{t.footerFormatter=cr};function cr(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let ir=({inColumns:t})=>{let e=t,l=e.find(n=>n.field==="KS-Serial"),a=e.find(n=>n.field==="Rate"),o=e.find(n=>n.field==="Pcs");l!==void 0&&ar({inFindColumn:l}),a!==void 0&&or({inFindColumn:a}),o!==void 0&&rr({inFindColumn:o})},sr=(t,e,l)=>{let a=e.AggValues.ItemsArray,n=document.getElementById("TemplateForItemNames").content.cloneNode("true");const s=new XMLSerializer().serializeToString(n);let i=l.html(s).find("table");b.data=a,b.onExpandRow=zn,ir({inColumns:b.columns}),i.bootstrapTable(b)};const dr="bi-plus-circle fs-4",ur="bi-dash-circle fs-4",mr={detailOpen:dr,detailClose:ur},fr="#toolbar",Fr="pk",Lr="true",$r=[],pr=!0,Ir="",jr="",Sr="",Vr=[{field:"pk",title:"Order#"},{field:"OrderData.Currentdateandtime",title:"Date",formatter:"LocalDate",visible:!1},{field:"DateTime",title:"Time Span",formatter:"TimeDiff",class:"d-none d-sm-table-cell"},{field:"AggValues.ItemDetails",title:"Items",footerFormatter:"ItemsFormatter",class:"d-none d-sm-table-cell"},{field:"AggValues.SettlementAmount",title:"Settlement",footerFormatter:"priceFormatter",align:"right",class:"d-none d-sm-table-cell"},{field:"IsSettled",title:"IsSettled",formatter:""},{title:"Opts.",field:"Opts",align:"center",formatter:""}],j={toolbar:fr,idfield:Fr,showFooter:Lr,data:$r,detailView:pr,onClickRow:Ir,onExpandRow:jr,icons:Sr,columns:Vr};let Cr=async({inFromFetch:t})=>{t.KTF===!1?Swal.fire({icon:"warning",text:t.KReason}):F()};const br=async({inRowData:t})=>{let e=t.pk,a=`/Custom/Cleaning/Branch/Today/Orders/OnlyOrders/${localStorage.getItem("BranchName")}/${e}`,c=await(await fetch(a,{method:"delete",headers:{Accept:"application/json","Content-Type":"application/json"}})).json();return Cr({inFromFetch:c}),c};let gr=async({inRowData:t})=>{Swal.fire({title:"Are you sure to delete?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Delete",focusCancel:!0,focusButtonColor:"#0000ff"}).then(e=>{e.isConfirmed&&br({inRowData:t}).then(l=>{})})};const hr=(t,e,l)=>{l==="Opts"&&(t.IsSettled||gr({inRowData:t}))};let Or=({inFindColumn:t})=>{t.formatter=Ar},Ar=(t,e,l)=>l+1,Tr=({inFindColumn:t})=>{t.footerFormatter=yr,t.formatter=Dr};const Dr=(t,e,l)=>t===""?"":`₹ ${t}`;function yr(t){return"₹ "+t.map(function(e){return+e.AggValues.SettlementAmount}).reduce(function(e,l){return e+l},0)}let wr=({inFindColumn:t})=>{t.footerFormatter=vr};function vr(t){this.field;var e=t.map(function(a){return+a.AggValues.ItemDetails.split(" / ")[1]}).reduce(function(a,o){return a+o},0),l=t.map(function(a){return+a.AggValues.ItemDetails.split(" / ")[0]}).reduce(function(a,o){return a+o},0);return`${l}/${e}`}const Nr=({inFindColumn:t})=>{t.formatter=Br},Br=(t,e)=>{const l=e.AddOnArray;if(l&&l.length>0){const a=l.reduce((o,n)=>o+n.AddOnRate,0);return`<a href="#" class="btn btn-primary ">${l.length}-${a}</a>`}return"No"};let kr=({inFindColumn:t})=>{t.formatter=Rr};function Rr(t,e,l){return e.IsSettled?[`<a href="./ExitOrderItems.html?OrderNumber=${e.pk}" class="link-danger">`,'<i class="bi bi-dropbox"></i>',"</a>"].join(""):['<a href="#" class="link-danger DeleteClass">','<i class="bi bi-trash"></i>',"</a>"].join("")}let Er=({inFindColumn:t})=>{t.formatter=Pr,t.footerFormatter=xr};function Pr(t,e,l){let a=localStorage.getItem("PresentOrder"),o=JSON.parse(a),n=e.ItemSerial,c=Object.values(o.AddOnData).filter(s=>s.AddOnItemSerial===n);return c.length>0?c.map(i=>i.AddOnRate).reduce((i,d)=>i+d,0)*e.Pcs+e.Total:e.Total}function xr(t){return this.field,"₹ "+t.map(function(e){return+e.Total}).reduce(function(e,l){return e+l},0)}let Mr=({inFindColumn:t})=>{t.formatter=Hr};const Hr=t=>{if(t===void 0)return"";var e=new Date-new Date(t),l=Math.floor(e/864e5),a=Math.floor(e%864e5/36e5),o=Math.round(e%864e5%36e5/6e4);return l+" days, "+a+" hours, "+o+" min..."};let Kr=({inFindColumn:t})=>{t.footerFormatter=Jr};function Jr(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let Ur=({inFindColumn:t})=>{t.formatter=Wr},Wr=(t,e,l)=>new Date(t).toLocaleDateString("en-GB"),zr=({inFindColumn:t})=>{t.formatter=Gr},Gr=(t,e,l)=>(console.log("value : ",t),t===!0?'<span class="badge bg-success"><b>✓</b></span>':'<span class="badge bg-danger">✘</span>'),Yr=({inColumns:t})=>{let e=t,l=e.find(r=>r.field==="KS-Serial"),a=e.find(r=>r.field==="AggValues.SettlementAmount"),o=e.find(r=>r.field==="AggValues.ItemDetails"),n=e.find(r=>r.field==="KS-AddOns"),c=e.find(r=>r.field==="Opts"),s=e.find(r=>r.field==="KS-Amount"),i=e.find(r=>r.field==="DateTime");e.find(r=>r.field==="ItemName");let d=e.find(r=>r.field==="Pcs");e.find(r=>r.field==="location");let u=e.find(r=>r.field==="DeliveryDateTime");e.find(r=>r.field==="ItemService");let m=e.find(r=>r.field==="IsSettled");l!==void 0&&Or({inFindColumn:l}),a!==void 0&&Tr({inFindColumn:a}),o!==void 0&&wr({inFindColumn:o}),n!==void 0&&Nr({inFindColumn:n}),c!==void 0&&kr({inFindColumn:c}),s!==void 0&&Er({inFindColumn:s}),i!==void 0&&Mr({inFindColumn:i}),d!==void 0&&Kr({inFindColumn:d}),u!==void 0&&Ur({inFindColumn:u}),m!==void 0&&zr({inFindColumn:m})};const Xr="AllTableId",qr=()=>{var t=$(`#${Xr}`);j.icons=mr,j.onExpandRow=sr,j.onClickRow=hr,Yr({inColumns:j.columns}),t.bootstrapTable(j)},Qr=()=>{Lo(),Nn(),qr()},Zr=()=>{Qr(),Qa(),Ne(),Be(),_r()};let _r=()=>{if(tc()!==""){var t=document.getElementById("CustomerNameSearchButtonId"),e=new Event("click");t.dispatchEvent(e)}},tc=()=>{let e=document.getElementById("CustomerNameInputId");if(e!==null)return e.value.trim()};const ec=async()=>{if(Zr(),M({inSuccessFunc:v})===!1)return await!1;v()};document.addEventListener("DOMContentLoaded",function(){let t=document.getElementById("editCustomerModal"),l=document.getElementById("CustomerNameInputId");t.addEventListener("shown.bs.modal",function(){document.getElementById("CustomerName").focus()}),t.addEventListener("hidden.bs.modal",()=>{setTimeout(()=>{l.setAttribute("tabindex","-1"),l.focus()},5)})});ec().then();
